<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X (Twitter) æ¨æ–‡ç”Ÿæˆå™¨ - å¸¦å›¾ç‰ˆ</title>
    <!-- å¼•å…¥ html2canvas ç”¨äºæˆªå›¾ä¸‹è½½ -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #000000;
            --border-color: #2f3336;
            --text-main: #e7e9ea;
            --text-secondary: #71767b;
            --accent-blue: #1d9bf0;
            --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-stack);
            background-color: #121212;
            color: white;
            display: flex;
            min-height: 100vh;
        }

        /* å·¦ä¾§æ§åˆ¶å° */
        .controls {
            width: 350px;
            background: #1e1e1e;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #333;
            box-shadow: 2px 0 10px rgba(0,0,0,0.5);
            z-index: 10;
        }

        .controls h2 { margin-top: 0; font-size: 18px; color: var(--accent-blue); }
        
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; font-size: 12px; color: #aaa; }
        .input-group input, .input-group textarea, .input-group select {
            width: 100%;
            padding: 8px;
            background: #2b2b2b;
            border: 1px solid #444;
            color: white;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .input-group textarea { resize: vertical; min-height: 80px; }
        
        .btn-row { display: flex; gap: 10px; }
        
        button {
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        button.remove-btn {
            background-color: #f4212e;
            color: white;
            width: 100%;
            margin-top: 5px;
            display: none; /* é»˜è®¤éšè— */
        }

        button#downloadBtn {
            width: 100%;
            padding: 12px;
            background: var(--accent-blue);
            color: white;
            border-radius: 20px;
            margin-top: 20px;
            font-size: 16px;
        }
        button#downloadBtn:hover { background-color: #1a8cd8; }

        /* å³ä¾§é¢„è§ˆåŒº */
        .preview-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
            background-color: #191919;
            background-image: radial-gradient(#2a2a2a 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* æ¨æ–‡å¡ç‰‡æ ¸å¿ƒæ ·å¼ */
        .tweet-card {
            width: 600px;
            background-color: var(--bg-color);
            padding: 16px;
            border: 1px solid var(--border-color);
            box-sizing: border-box;
            position: relative;
        }

        /* å¤´éƒ¨ï¼šå¤´åƒä¸åç§° */
        .tweet-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            justify-content: center;
            flex: 1;
        }

        .name-row {
            display: flex;
            align-items: center;
        }

        .nickname {
            font-weight: 700;
            font-size: 15px;
            color: var(--text-main);
            margin-right: 4px;
        }

        .verified-icon {
            width: 18px;
            height: 18px;
            color: var(--accent-blue);
            fill: currentColor;
        }

        .handle {
            font-size: 15px;
            color: var(--text-secondary);
        }

        .three-dots {
            color: var(--text-secondary);
            margin-left: auto;
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        /* å†…å®¹ */
        .tweet-content {
            font-size: 17px;
            line-height: 24px;
            color: var(--text-main);
            white-space: pre-wrap;
            margin-bottom: 12px;
        }
        
        .hashtag { color: var(--accent-blue); }

        /* --- æ–°å¢ï¼šæ¨æ–‡é™„å›¾æ ·å¼ --- */
        .tweet-media {
            margin-top: 12px;
            margin-bottom: 12px;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            display: none; /* é»˜è®¤ä¸æ˜¾ç¤º */
        }

        .tweet-media img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        /* ----------------------- */

        /* å…ƒæ•°æ®ï¼šæ—¶é—´ */
        .tweet-meta {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .dot-separator { margin: 0 4px; }
        .views-label { color: var(--text-main); font-weight: 700; }

        /* ç»Ÿè®¡æ•°æ® */
        .tweet-stats {
            display: flex;
            gap: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 16px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .stat-item strong {
            color: var(--text-main);
            font-weight: 700;
        }

        /* åº•éƒ¨æ“ä½œæ  */
        .tweet-actions {
            display: flex;
            justify-content: space-around;
            color: var(--text-secondary);
        }

        .action-icon {
            width: 22.5px;
            height: 22.5px;
            fill: currentColor;
        }

        /* å“åº”å¼ */
        @media (max-width: 800px) {
            body { flex-direction: column; }
            .controls { width: 100%; height: auto; border-right: none; border-bottom: 1px solid #333; }
            .tweet-card { width: 100%; max-width: 500px; }
        }
    </style>
</head>
<body>

    <!-- å·¦ä¾§è®¾å®šåŒº -->
    <div class="controls">
        <h2>ğŸ› ï¸ æ¨æ–‡è®¾å®š</h2>
        
        <div class="input-group">
            <label>ç”¨æˆ·å¤´åƒ</label>
            <input type="file" id="avatarInput" accept="image/*">
        </div>

        <div class="input-group">
            <label>æ˜¾ç¤ºåç§° (æ˜µç§°)</label>
            <input type="text" id="nameInput" value="Default User">
        </div>

        <div class="input-group">
            <label>ç”¨æˆ· ID (ä¸å« @)</label>
            <input type="text" id="handleInput" value="DefaultUser">
        </div>

        <div class="input-group">
            <label>æ˜¯å¦æ˜¾ç¤ºè“å‹¾å‹¾</label>
            <select id="verifiedInput">
                <option value="true">æ˜¯</option>
                <option value="false">å¦</option>
            </select>
        </div>

        <div class="input-group">
            <label>æ¨æ–‡å†…å®¹</label>
            <textarea id="textInput">è¯·è¾“å…¥æ–‡å­—...</textarea>
        </div>

        <!-- æ–°å¢ï¼šæ¨æ–‡é™„å›¾è®¾å®š -->
        <div class="input-group">
            <label>æ¨æ–‡é™„å›¾ (é€‰å¡«)</label>
            <input type="file" id="tweetImageInput" accept="image/*">
            <button id="removeImageBtn" class="remove-btn">âŒ ç§»é™¤å›¾ç‰‡</button>
        </div>

        <div class="input-group">
            <label>æ—¶é—´å­—ä¸²</label>
            <input type="text" id="timeInput" value="ä¸Šåˆ8:56 Â· 2022å¹´4æœˆ28æ—¥">
        </div>
        
        <div class="input-group">
            <label>è§‚çœ‹æ¬¡æ•°</label>
            <input type="text" id="viewsInput" value="480 ä¸‡">
        </div>

        <div class="input-group">
            <label>è½¬æ¨æ•° (Retweets)</label>
            <input type="text" id="retweetsInput" value="86.5ä¸‡">
        </div>

        <div class="input-group">
            <label>å¼•ç”¨æ•° (Quotes)</label>
            <input type="text" id="quotesInput" value="12.3ä¸‡">
        </div>

        <div class="input-group">
            <label>å–œæ¬¢æ•° (Likes)</label>
            <input type="text" id="likesInput" value="480ä¸‡">
        </div>

        <button id="downloadBtn">ğŸ“¸ ä¸‹è½½å›¾ç‰‡</button>
    </div>

    <!-- å³ä¾§é¢„è§ˆåŒº -->
    <div class="preview-area">
        <div class="tweet-card" id="tweetCard">
            <!-- å¤´éƒ¨ -->
            <div class="tweet-header">
                <img src="https://ui-avatars.com/api/?name=Default+User&background=random" alt="Avatar" class="avatar" id="displayAvatar">
                <div class="user-info">
                    <div class="name-row">
                        <span class="nickname" id="displayName">Default User</span>
                        <!-- è“å‹¾å‹¾ SVG -->
                        <svg class="verified-icon" id="displayVerified" viewBox="0 0 24 24" aria-hidden="true"><g><path d="M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .495.083.965.238 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"></path></g></svg>
                    </div>
                    <div class="handle" id="displayHandle">@defaultuser</div>
                </div>
                <!-- ä¸‰ç‚¹èœå• -->
                <svg viewBox="0 0 24 24" aria-hidden="true" class="three-dots"><g><path d="M3 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9 2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm7 0c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"></path></g></svg>
            </div>

            <!-- æ–‡å­—å†…å®¹ -->
            <div class="tweet-content" id="displayContent">è¯·è¾“å…¥æ–‡å­—...</div>

            <!-- æ–°å¢ï¼šå›¾ç‰‡å†…å®¹å®¹å™¨ -->
            <div class="tweet-media" id="tweetMediaContainer">
                <img id="displayTweetImage" src="" alt="Tweet Image">
            </div>

            <!-- æ—¶é—´ -->
            <div class="tweet-meta">
                <span id="displayTime">ä¸Šåˆ8:56 Â· 2022å¹´4æœˆ28æ—¥</span>
                <span class="dot-separator">Â·</span>
                <span class="views-label"><span id="displayViews">480 ä¸‡</span></span> <span style="color:var(--text-secondary)">æŸ¥çœ‹</span>
            </div>

            <!-- ç»Ÿè®¡ -->
            <div class="tweet-stats">
                <div class="stat-item"><strong id="displayRetweets">86.5ä¸‡</strong> <span>è½¬æ¨</span></div>
                <div class="stat-item"><strong id="displayQuotes">12.3ä¸‡</strong> <span>å¼•ç”¨</span></div>
                <div class="stat-item"><strong id="displayLikes">480ä¸‡</strong> <span>å–œæ¬¢</span></div>
            </div>

            <!-- åº•éƒ¨å›¾ç¤º -->
            <div class="tweet-actions">
                <svg viewBox="0 0 24 24" class="action-icon"><g><path d="M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01zm8.005-6c-3.317 0-6.005 2.69-6.005 6 0 3.37 2.77 6.08 6.138 6.01l.351-.01h1.761v2.3l5.087-2.81c1.951-1.08 3.163-3.13 3.163-5.36 0-3.39-2.744-6.13-6.129-6.13H9.756z"></path></g></svg>
                <svg viewBox="0 0 24 24" class="action-icon"><g><path d="M4.5 3.88l4.432 4.14-1.364 1.46L5.5 7.55V16c0 1.1.896 2 2 2H13v2H7.5c-2.209 0-4-1.79-4-4V7.55L1.364 9.48 0 8.02l4.5-4.14zM11 2h5.5c2.209 0 4 1.79 4 4v8.45l2.136-1.93 1.364 1.46-4.5 4.14-4.432-4.14 1.364-1.46 2.068 1.93V6c0-1.1-.896-2-2-2H11V2z"></path></g></svg>
                <svg viewBox="0 0 24 24" class="action-icon"><g><path d="M16.697 5.5c-1.222-.06-2.679.51-3.89 2.16l-.805 1.09-.806-1.09C9.984 6.01 8.526 5.44 7.304 5.5c-1.243.07-2.349.78-2.91 1.91-.552 1.12-.633 2.78.479 4.82 1.074 1.97 3.257 4.27 7.129 6.61 3.87-2.34 6.052-4.64 7.126-6.61 1.111-2.04 1.03-3.7.477-4.82-.561-1.13-1.666-1.84-2.908-1.91zm4.187 7.69c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"></path></g></svg>
                <svg viewBox="0 0 24 24" class="action-icon"><g><path d="M12 2.59l5.7 5.7-1.41 1.42L13 6.41V16h-2V6.41l-3.3 3.3-1.41-1.42L12 2.59zM21 15l-.02 3.51c0 1.38-1.12 2.49-2.5 2.49H5.5C4.11 21 3 19.88 3 18.5V15h2v3.5c0 .28.22.5.5.5h12.98c.28 0 .5-.22.5-.5L19 15h2z"></path></g></svg>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const inputs = {
            name: document.getElementById('nameInput'),
            handle: document.getElementById('handleInput'),
            verified: document.getElementById('verifiedInput'),
            text: document.getElementById('textInput'),
            time: document.getElementById('timeInput'),
            views: document.getElementById('viewsInput'),
            retweets: document.getElementById('retweetsInput'),
            quotes: document.getElementById('quotesInput'),
            likes: document.getElementById('likesInput'),
            avatar: document.getElementById('avatarInput'),
            // æ–°å¢ï¼šå›¾ç‰‡ä¸æŒ‰é’®
            tweetImage: document.getElementById('tweetImageInput'),
            removeImageBtn: document.getElementById('removeImageBtn')
        };

        const displays = {
            name: document.getElementById('displayName'),
            handle: document.getElementById('displayHandle'),
            verified: document.getElementById('displayVerified'),
            text: document.getElementById('displayContent'),
            time: document.getElementById('displayTime'),
            views: document.getElementById('displayViews'),
            retweets: document.getElementById('displayRetweets'),
            quotes: document.getElementById('displayQuotes'),
            likes: document.getElementById('displayLikes'),
            avatar: document.getElementById('displayAvatar'),
            // æ–°å¢ï¼šé¢„è§ˆç›¸å…³
            mediaContainer: document.getElementById('tweetMediaContainer'),
            mediaImage: document.getElementById('displayTweetImage')
        };

        // åŸºæœ¬æ–‡å­—è¾“å…¥ç›‘å¬
        inputs.name.addEventListener('input', (e) => displays.name.innerText = e.target.value);
        inputs.handle.addEventListener('input', (e) => displays.handle.innerText = '@' + e.target.value);
        
        inputs.verified.addEventListener('change', (e) => {
            displays.verified.style.display = e.target.value === 'true' ? 'block' : 'none';
        });

        inputs.text.addEventListener('input', (e) => {
            const text = e.target.value;
            const formatted = text.replace(/#(\w+)/g, '<span class="hashtag">#$1</span>');
            displays.text.innerHTML = formatted;
        });

        inputs.time.addEventListener('input', (e) => displays.time.innerText = e.target.value);
        inputs.views.addEventListener('input', (e) => displays.views.innerText = e.target.value);
        inputs.retweets.addEventListener('input', (e) => displays.retweets.innerText = e.target.value);
        inputs.quotes.addEventListener('input', (e) => displays.quotes.innerText = e.target.value);
        inputs.likes.addEventListener('input', (e) => displays.likes.innerText = e.target.value);

        // å¤´åƒä¸Šä¼ é€»è¾‘
        inputs.avatar.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    displays.avatar.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });

        // --- æ–°å¢ï¼šæ¨æ–‡å›¾ç‰‡ä¸Šä¼ é€»è¾‘ ---
        inputs.tweetImage.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    displays.mediaImage.src = e.target.result;
                    displays.mediaContainer.style.display = 'block'; // æ˜¾ç¤ºå›¾ç‰‡å®¹å™¨
                    inputs.removeImageBtn.style.display = 'block'; // æ˜¾ç¤ºç§»é™¤æŒ‰é’®
                }
                reader.readAsDataURL(file);
            }
        });

        // --- æ–°å¢ï¼šç§»é™¤å›¾ç‰‡é€»è¾‘ ---
        inputs.removeImageBtn.addEventListener('click', function() {
            inputs.tweetImage.value = ''; // æ¸…ç©º input file
            displays.mediaImage.src = '';
            displays.mediaContainer.style.display = 'none'; // éšè—å›¾ç‰‡å®¹å™¨
            this.style.display = 'none'; // éšè—æŒ‰é’®æœ¬èº«
        });

        // ä¸‹è½½æˆªå›¾é€»è¾‘
        document.getElementById('downloadBtn').addEventListener('click', () => {
            const element = document.getElementById('tweetCard');
            
            html2canvas(element, {
                backgroundColor: '#000000',
                scale: 2,
                useCORS: true // å¢åŠ è·¨åŸŸæ”¯æŒ (è™½ç„¶ä¸»è¦é  FileReader è§£å†³äº†)
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'fake-tweet-image.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });
    </script>
</body>
</html>